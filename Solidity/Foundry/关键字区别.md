# require assert revert

| 特性        | `require` | `assert`      | `revert`    |
| --------- | --------- | ------------- | ----------- |
| 用途        | 输入验证、权限检查 | 内部不变量检查       | 手动提前返回/复杂条件 |
| 可带信息      | ✅ 是       | ❌ 否（但可 panic） | ✅ 是 / 自定义错误 |
| 剩余 gas 退还 | ✅ 会       | ❌ 不会          | ✅ 会         |
| 使用推荐      | 用户错误      | 程序错误（bug）     | 更复杂的控制流     |
## 🧪 Solidity 0.8.x 后推荐用法

- ✅ 一般条件检查：`require(condition, "error message")`
    
- ✅ 自定义错误：定义 `error MyError();` + `revert MyError();`（更省 gas）
    
- ✅ 程序不可达或状态错误：用 `assert()`

immutable 和 constant 区别

|特性|constant|immutable|
|---|---|---|
|赋值时间|编译时必须赋值|部署时构造函数赋值|
|是否占用存储槽|不占存储槽|占用存储槽|
|支持类型|基本类型（uint,address等）|任何类型|
|读 gas|低（替换成字面量，极低）|较低（但比constant略高）|
|常见用法|固定参数、常量数值|部署时动态值（地址、链ID）|
