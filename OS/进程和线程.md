
## **进程 (Process)**

- **定义**：进程是操作系统资源分配和调度的基本单位。每个进程都有独立的内存空间、文件句柄、数据段、代码段等。
    
- **特点**：
    
    - 相互独立，一个进程崩溃不会直接影响其他进程。
        
    - 创建和切换进程的代价大（需要切换内核态、切换内存上下文）。
        
- **举例**：  
    你开了两个微信窗口，就是两个不同的进程；浏览器和 VSCode 也是两个进程。
    
---
### **线程 (Thread)**

- **定义**：线程是进程中最小的执行单元，属于进程的一部分。
    
- **特点**：
    - 一个进程至少有一个线程（主线程），也可以有多个线程。
        
    - 同一进程下的线程共享内存空间和资源（文件句柄、堆内存等）。
        
    - 切换开销比进程小，但仍需内核态支持。

- **举例**：  
    浏览器是一个进程，但它会启动多个线程：
    
    - 一个线程渲染页面
    - 一个线程执行 JavaScript
    - 一个线程处理网络请求
---
### 进程间通行
**进程之间是独立的，不能直接访问彼此的内存**，所以需要一种 **进程间通信（IPC, Inter-Process Communication）** 的机制。主要有以下几类：
## **1. 管道（Pipe）**

- **匿名管道**
    
    - 只能用于有亲缘关系的进程（如父子进程）。
        
    - 单向通信，一端写、一端读。
        
    - 举例：Linux 中 `ps aux | grep go` 就是用管道连接两个进程。
        
- **命名管道（FIFO）**
    
    - 有名字（存在于文件系统），不要求进程有亲缘关系。
        
    - 双方只要打开同一个 FIFO 文件，就能通信。
---
## **2. 信号（Signal）**

- **机制**：操作系统向进程发送一个信号，通知它发生了某种事件（如 `SIGKILL`, `SIGTERM`, `SIGINT`）。
    
- **特点**：只能传递简单的控制信息，不能传大量数据。
    
- **举例**：在 Linux 里用 `kill -9 pid` 就是发一个信号。
---

## **3. 消息队列（Message Queue）**

- **机制**：操作系统维护一个队列，进程可以往队列里写消息或取消息。
    
- **特点**：支持多进程读写，适合传递结构化数据。
    
- **缺点**：内核维护队列，有容量限制。
    
- **举例**：Linux 的 `msgget/msgsnd/msgrcv` 系统调用。
---
## **4. 共享内存（Shared Memory）**

- **机制**：让两个或多个进程共享一块物理内存区域。
    
- **特点**：
    
    - 速度最快（数据直接读写，不用拷贝）。
        
    - 必须搭配 **信号量/互斥锁** 来解决并发读写冲突。
        
- **举例**：数据库通常用共享内存做缓存池。
---
## **5. 信号量（Semaphore）**

- **机制**：一种计数器，用于进程间同步，而不是传数据。
    
- **举例**：两个进程通过信号量协调对共享资源的访问。
---
## **6. 套接字（Socket）**

- **机制**：基于网络接口的通信方式，既可以本机进程间通信，也可以跨机器通信。
    
- **特点**：
    
    - 灵活、通用，可以本地也可以远程。
        
    - 成本比共享内存高。
        
- **举例**：Web 服务器和浏览器之间通过 TCP/HTTP 交互。
---
## **7. 其他**

- **内存映射文件（mmap）**：多个进程映射同一个文件到内存，来进行数据交换。
    
- **D-Bus、gRPC、Thrift 等高级 IPC 框架**：在操作系统 IPC 之上做了更易用的封装。
---
## **总结对比表**

|通信方式|数据量|是否亲缘关系要求|速度|使用场景|
|---|---|---|---|---|
|管道（Pipe）|小/中|匿名管道需要|中|父子进程命令行通信|
|信号（Signal）|极小|否|快|异常通知、事件提醒|
|消息队列|中等|否|中|多进程异步通信|
|共享内存|大量|否|很快|高性能通信，如数据库缓存|
|信号量|不传数据|否|快|进程同步、互斥|
|套接字（Socket）|大量|否|较慢|跨主机/通用通信|