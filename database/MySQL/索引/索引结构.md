**索引**（Index）是在数据库表的列上建立的一种**数据结构**（有序），  
用来**加快数据的查询速度**，就像书籍的目录一样，可以快速定位数据的位置，而不必逐行扫描整张表。

---
### 1️⃣ 索引的作用

- **提升查询速度**（尤其是大表）
    
- **减少磁盘 I/O**（直接定位数据页）
    
- **加快排序和分组**（ORDER BY、GROUP BY）
    
- **提高表的唯一性约束**（唯一索引）
---
### 2️⃣ 索引的原理（以 MySQL InnoDB 为例）

- **InnoDB** 的索引底层一般使用 **B+ 树** 存储
    
- 索引结构中存储的是**键值（列值）**和**指向数据行的指针**
    
- 通过索引，数据库可以**快速定位到数据所在的页**，而不是全表扫描
---
## 3️⃣ 常见索引类型

| 类型                    | 特点           | 适用场景            |
| --------------------- | ------------ | --------------- |
| **主键索引（PRIMARY KEY）** | 唯一且非空，每表一个   | 表唯一标识，自动创建聚簇索引  |
| **唯一索引（UNIQUE）**      | 不允许重复值，可以有多个 | 用户名、身份证号        |
| **普通索引（INDEX）**       | 可重复，可为空      | 频繁查询的字段         |
| **全文索引（FULLTEXT）**    | 支持分词匹配       | 文章、评论搜索         |
| **组合索引**              | 多列组合建立       | 多条件查询（遵循最左前缀原则） |
### 索引分类
| 类型                    | 含义                           | 特点             |
| --------------------- | ---------------------------- | -------------- |
| 聚集索引(Clustered Index) | 将数据存储和索引放到一块，索引结构的叶子结点保存了行数据 | 表唯一标识，自动创建聚簇索引 |
| 二级索引(Secondary Index) | 将数据和索引分开存储，索引结构的叶子结点关联是对应的主键 | 可以存在多个         |
![[Pasted image 20250814181304.png]]
![[Pasted image 20250814181522.png]]
### 4️⃣ 索引的优缺点

**优点**：

- 查询速度快（大幅减少扫描行数）
    
- 提高排序和分组效率
    
- 帮助保持数据唯一性

**缺点**：

- 占用磁盘空间
    
- 写入性能下降（INSERT、UPDATE、DELETE 需要维护索引）
    
- 对小表不明显（全表扫描可能更快）
---
![[Pasted image 20250813040229.png]]

## Hash 索引 
哈希索引就是采用一定的 hash 算法，将键值换算成新的 hash 值，映射到对应的槽位上，然后存储在 hash 表中 
如果两个(或多个)键值，映射到一个相同的槽位上，他们就产生了hash冲突(也称为hash碰撞)，
可以通过链表来解决。

![[Pasted image 20250813235651.png]]

为什么 InnoDB 存储引擎选择使用 B+ Tree 索引结构？
![[Pasted image 20250813234737.png]]

相对于 二叉树，层级更少，搜索效率高

对于B-tree，无论是叶子节点还是非叶子节点，都会保存数据，这样导致一页虫存储的键值减少，指针跟着减少，要同样保存大量数据，只能增加树的高度，导致性能降低

B+ 树数据只存在 叶子结点，叶子节点是双向链表结构  范围查询

## InnoDB 主键索引
![[Pasted image 20250814182609.png]]